server:
  port: 8081

spring:
  application:
    name: aixone-app-directory
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration
  config:
    import: optional:nacos:${spring.application.name}.${spring.cloud.nacos.config.file-extension}
  
  # JPA PostgreSQL Configuration
  datasource:
    url: jdbc:postgresql://127.0.0.1:5432/ai_xone
    username: ai_xone
    password: ai_xone
    driver-class-name: org.postgresql.Driver
  jpa:
    hibernate:
      ddl-auto: validate # Use validate since Flyway will manage the schema
    show-sql: true
    properties:
      hibernate:
        default_schema: ai_xone
        format_sql: true
        dialect: org.hibernate.dialect.PostgreSQLDialect

  # Flyway Configuration for Database Migration
  flyway:
    enabled: true
    url: jdbc:postgresql://127.0.0.1:5432/ai_xone
    user: ai_xone
    password: ai_xone
    schemas: ai_xone
    locations: classpath:db/migration
    baseline-on-migrate: true
    validate-on-migrate: false
    ignore-missing-migrations: true
    
  # Redis Configuration
  data:
    redis:
      host: localhost
      port: 6379
      database: 0
      timeout: 10s

  # Nacos 服务发现配置
  cloud:
    nacos:
      discovery:
        server-addr: localhost:8848
        namespace: public
        group: DEFAULT_GROUP
        enabled: true
        register-enabled: true
        ip: ${spring.cloud.client.ip-address:}
        port: ${server.port:8081}
        metadata:
          management.context-path: /actuator
          user-context-path: ${server.servlet.context-path:}
      config:
        server-addr: localhost:8848
        file-extension: yaml
        namespace: public
        group: DEFAULT_GROUP
        enabled: false  # 配置中心暂时禁用，如需使用可启用

# JWT Configuration
jwt:
  secret: aixone-tech-auth-secret-key-for-jwt-token-generation-and-validation
  issuer: aixone-tech-auth

# Security Configuration
security:
  jwt:
    secret: ${jwt.secret}

# Logging Configuration
logging:
  level:
    root: INFO
    com.aixone.directory: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql: TRACE 